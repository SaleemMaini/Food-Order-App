(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{11:function(t,e,n){t.exports={"cart-items":"Cart_cart-items__3K3IZ",total:"Cart_total__2CnBl",actions:"Cart_actions__2uvzP","button--alt":"Cart_button--alt__2oGQz",button:"Cart_button__1bCiN"}},13:function(t,e,n){t.exports={"cart-item":"CartItem_cart-item__2UegP",summary:"CartItem_summary__Ocyzb",price:"CartItem_price__1DiMZ",quantity:"CartItem_quantity__2NVcq",actions:"CartItem_actions__h-B5S",disableBtn:"CartItem_disableBtn__1zzsH"}},19:function(t,e,n){t.exports={button:"HeaderCartButton_button__2PYfn",icon:"HeaderCartButton_icon__3Wpam",badge:"HeaderCartButton_badge__1jtXQ",bump:"HeaderCartButton_bump__1Hc6B"}},20:function(t,e,n){t.exports={form:"MealItemForm_form__a7gDZ",quantityControl:"MealItemForm_quantityControl__1fj8-",disableBtn:"MealItemForm_disableBtn__198GX"}},24:function(t,e,n){t.exports={mealsList:"MealsList_mealsList__1Ra_N","meals-appear":"MealsList_meals-appear__2eTXN",errorHandle:"MealsList_errorHandle__3qV_Z"}},25:function(t,e,n){t.exports={meal:"MealItem_meal__3tpdw",description:"MealItem_description__3s4VQ",mealPhoto:"MealItem_mealPhoto__TsIh_",price:"MealItem_price__2SWWK",mealCol:"MealItem_mealCol__MJYyM",mealCard:"MealItem_mealCard__GTqef"}},26:function(t,e,n){t.exports={backdrop:"Modal_backdrop__1C-zG",modal:"Modal_modal__1v4hb","slide-down":"Modal_slide-down__1nl5d"}},30:function(t,e,n){t.exports={input:"Input_input__32dYR"}},37:function(t,e,n){},43:function(t,e,n){"use strict";n.r(e);var a=n(10),c=n.n(a),i=(n(37),n(6)),r=n(0),s=n.n(r),o=n(27),l=n(22),u=n(1),d=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(u.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},m=n(19),j=n.n(m),b=s.a.createContext({items:[],totalAmount:0,addItem:function(t){},removeItem:function(t){},clearCart:function(){}}),p=function(t){var e=Object(r.useState)(!1),n=Object(i.a)(e,2),a=n[0],c=n[1],s=Object(r.useContext)(b).items,o=s.reduce((function(t,e){return t+e.quantity}),0),l="".concat(j.a.button," ").concat(a?j.a.bump:"");return Object(r.useEffect)((function(){if(0!==s.length){c(!0);var t=setTimeout((function(){return c(!1)}),300);return function(){clearTimeout(t)}}}),[s]),Object(u.jsxs)("button",{className:l,onClick:t.onClick,children:[Object(u.jsx)("span",{className:j.a.icon,children:Object(u.jsx)(d,{})}),Object(u.jsx)("span",{className:j.a.badge,children:o})]})},h=n.p+"static/media/logo.afc79b0a.png",O=function(t){return Object(u.jsx)(o.a,{sticky:"top",bg:"dark",variant:"dark",children:Object(u.jsxs)(l.a,{children:[Object(u.jsxs)(o.a.Brand,{href:"#home",children:[Object(u.jsx)("img",{src:h,alt:"",width:"30",height:"30",className:"mx-3"}),Object(u.jsx)("span",{style:{fontWeight:600},children:"Food order app"})]}),Object(u.jsx)(o.a.Brand,{children:Object(u.jsx)(p,{onClick:t.cartOnClick})})]})})},f=n(14),x=n.n(f),_=n(23),v=function(){var t=Object(r.useState)(!1),e=Object(i.a)(t,2),n=e[0],a=e[1],c=Object(r.useState)(null),s=Object(i.a)(c,2),o=s[0],l=s[1],u=Object(r.useCallback)(function(){var t=Object(_.a)(x.a.mark((function t(e,n){var c,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(!0),l(null),t.prev=2,t.next=5,fetch(e.url,{method:e.method?e.method:"GET",headers:e.headers?e.headers:{},body:e.body?JSON.stringify(e.body):null});case 5:if((c=t.sent).ok){t.next=8;break}throw new Error("Request Failed");case 8:return t.next=10,c.json();case 10:i=t.sent,n(i),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),l(t.t0.message||"Something wrong");case 17:a(!1);case 18:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e,n){return t.apply(this,arguments)}}(),[]);return{isLoading:n,error:o,sendRequest:u}},C=n(24),y=n.n(C),N=n(25),g=n.n(N),I=n(2),k=n(30),B=n.n(k),q=s.a.forwardRef((function(t,e){var n=Object(r.useRef)(),a=function(){return n.current.value};return Object(r.useImperativeHandle)(e,(function(){return{value:a}})),Object(u.jsxs)("div",{className:t.className||B.a.input,children:[Object(u.jsx)("label",{htmlFor:t.input.id,children:t.label}),Object(u.jsx)("input",Object(I.a)({ref:n},t.input))]})})),M=n(20),T=n.n(M),E=function(t){var e=Object(r.useState)(!0),n=Object(i.a)(e,2),a=n[0],c=n[1],s=Object(r.useState)(1),o=Object(i.a)(s,2),l=o[0],d=o[1],m=Object(r.useRef)(),j=Object(r.useRef)(),p=Object(r.useContext)(b).items,h=p.findIndex((function(e){return e.id===t.id})),O=p[h];return Object(r.useEffect)((function(){O&&(O.quantity+ +l>25||0===l?(j.current.className="".concat(T.a.disableBtn),c(!1)):(j.current.className="",c(!0)))}),[O,c,l]),Object(u.jsxs)("form",{className:"".concat(T.a.form," mx-auto"),onSubmit:function(e){e.preventDefault(),t.onAddToCart(l)},children:[Object(u.jsxs)("div",{className:T.a.quantityControl,children:[Object(u.jsx)("button",{type:"button",onClick:function(t){l<25&&d(l+1)},children:"+"}),Object(u.jsx)(q,{input:{ref:m,id:"quantity_"+t.id,type:"number",min:1,max:25,step:1,onChange:function(){var t=+m.current.value;d(t),t>25||0===t?(c(!1),j.current.className="".concat(T.a.disableBtn)):(c(!0),j.current.className="")},value:l},label:"Quantity"}),Object(u.jsx)("button",{type:"button",onClick:function(t){l>1&&d(l-1)},children:"-"})]}),Object(u.jsx)("button",{ref:j,children:" +Add "}),Object(u.jsx)("p",{style:{color:"red"},children:a?"":"Max quantity is: 25"})]})},S=n(12),H=n(31),w=function(t){var e=Object(r.useContext)(b),n=e.items,a="$".concat(t.price.toFixed(2));return Object(u.jsx)(r.Fragment,{children:Object(u.jsx)(H.a,{className:g.a.mealCol,children:Object(u.jsx)(S.a,{className:"".concat(g.a.mealCard," text-center"),children:Object(u.jsxs)(S.a.Body,{children:[Object(u.jsx)("div",{className:"".concat(g.a.mealPhoto," mx-auto d-flex align-items-center"),children:Object(u.jsx)(S.a.Img,{className:"",variant:"top",src:"".concat(t.src),alt:"Image Photo"})}),Object(u.jsx)(S.a.Title,{children:t.name}),Object(u.jsx)(S.a.Text,{children:t.description}),Object(u.jsx)(S.a.Text,{children:a}),Object(u.jsx)(S.a.Footer,{style:{padding:"0.5rem 0rem"},children:Object(u.jsx)(E,{id:t.id,onAddToCart:function(a){var c=n.findIndex((function(e){return e.id===t.id}));n[c]?n[c].quantity+a>25?alert("Can't add more than 25 items of same meal"):e.addItem({id:t.id,name:t.name,quantity:a,price:t.price}):e.addItem({id:t.id,name:t.name,quantity:a,price:t.price})}})})]})})})})},R=n(32),A=function(){var t=Object(r.useState)([]),e=Object(i.a)(t,2),n=e[0],a=e[1],c=v(),s=c.isLoading,o=c.error,d=c.sendRequest;Object(r.useEffect)((function(){d({url:"https://react-http-3176c-default-rtdb.firebaseio.com/meals.json"},(function(t){var e=[];for(var n in t)e.push({id:n,name:t[n].name,description:t[n].description,price:t[n].price,photo:t[n].photo});a(e)}))}),[d]);var m=n.map((function(t){return Object(u.jsx)(w,{id:t.id,name:t.name,description:t.description,price:t.price,src:t.photo},t.id)}));return Object(u.jsxs)(l.a,{className:y.a.mealsList,children:[Object(u.jsx)("header",{children:"Meals List"}),s&&Object(u.jsx)("p",{className:y.a.errorHandle,children:"Loading..."}),o&&Object(u.jsxs)("p",{className:y.a.errorHandle,children:[o," ( Please turn on the VPN if firebase doesn't work in your country )."]}),Object(u.jsx)(R.a,{children:m})]})},P=n(15),F={items:[],totalAmount:0},L=function(t,e){if("ADD_ITEM"===e.type){var n,a=t.items.findIndex((function(t){return t.id===e.item.id})),c=t.items[a],i=t.totalAmount+e.item.price*e.item.quantity;if(c)if(c.quantity<25){var r=Object(I.a)(Object(I.a)({},c),{},{quantity:c.quantity+e.item.quantity});(n=Object(P.a)(t.items))[a]=r}else n=Object(P.a)(t.items);else n=t.items.concat(e.item);return{items:n,totalAmount:i}}if("REMOVE_ITEM"===e.type){var s,o=t.items.findIndex((function(t){return t.id===e.id})),l=t.items[o],u=t.totalAmount-l.price;if(1===l.quantity)s=t.items.filter((function(t){return t.id!==e.id}));else{var d=Object(I.a)(Object(I.a)({},l),{},{quantity:l.quantity-1});(s=Object(P.a)(t.items))[o]=d}return{items:s,totalAmount:u}}return e.type,F},V=function(t){var e=Object(r.useReducer)(L,F),n=Object(i.a)(e,2),a=n[0],c=n[1],s={items:a.items,totalAmount:a.totalAmount,addItem:function(t){c({type:"ADD_ITEM",item:t})},removeItem:function(t){c({type:"REMOVE_ITEM",id:t})},clearCart:function(){c({type:"CLEAR"})}};return Object(u.jsx)(b.Provider,{value:s,children:t.children})},z=n(11),D=n.n(z),G=n(26),J=n.n(G),Q=function(t){return Object(u.jsx)("div",{className:J.a.backdrop,onClick:t.onClick})},U=function(t){return Object(u.jsx)("div",{className:J.a.modal,children:Object(u.jsx)("div",{className:J.a.content,children:t.children})})},X=document.getElementById("modal"),W=function(t){return Object(u.jsxs)(r.Fragment,{children:[c.a.createPortal(Object(u.jsx)(Q,{onClick:t.onClose}),X),c.a.createPortal(Object(u.jsx)(U,{children:t.children}),X)]})},Z=n(13),K=n.n(Z),Y=function(t){var e=Object(r.useContext)(b).items,n=Object(r.useRef)(),a=e.findIndex((function(e){return e.id===t.id})),c=e[a];return Object(r.useEffect)((function(){c&&(25===c.quantity?n.current.className="".concat(K.a.disableBtn):n.current.className="")}),[c]),Object(u.jsxs)("li",{className:K.a["cart-item"],children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:t.name}),Object(u.jsxs)("div",{className:K.a.summary,children:[Object(u.jsx)("span",{className:K.a.price,children:"$".concat(t.price)}),Object(u.jsx)("span",{className:K.a.quantity,children:"X ".concat(t.quantity)})]})]}),Object(u.jsxs)("div",{className:K.a.actions,children:[Object(u.jsx)("button",{onClick:t.onRemove,children:"-"}),Object(u.jsx)("button",{onClick:t.onAdd,ref:n,children:"+"})]})]})},$=n(7),tt=n.n($),et={value:"",isTouched:!1},nt=function t(e,n){return"INPUT"===n.type?{value:n.value,isTouched:e.isTouched}:"BLUR"===n.type?{value:e.value,isTouched:!0}:"RESET"===n.type?{value:"",isTouched:!1}:t},at=function(t){var e=Object(r.useReducer)(nt,et),n=Object(i.a)(e,2),a=n[0],c=n[1],s=t(a.value),o=!s&&a.isTouched;return{value:a.value,hasError:o,isValid:s,inputChangeHandler:function(t){c({type:"INPUT",value:t.target.value})},inputBlurHandler:function(){c({type:"BLUR"})},resetInput:function(){c({type:"RESET"})}}},ct=function(t){var e=Object(r.useState)(!1),n=Object(i.a)(e,2),a=n[0],c=n[1],s=Object(r.useContext)(b),o=function(t){return""!==t.trim()},l=at(o),d=l.value,m=l.hasError,j=l.isValid,p=l.inputBlurHandler,h=l.inputChangeHandler,O=m?"".concat(tt.a.control," ").concat(tt.a.invalid):"".concat(tt.a.control),f=at(o),x=f.value,_=f.hasError,v=f.isValid,C=f.inputBlurHandler,y=f.inputChangeHandler,N=_?"".concat(tt.a.control,"  ").concat(tt.a.invalid):"".concat(tt.a.control),g=at(o),I=g.value,k=g.hasError,B=g.isValid,M=g.inputBlurHandler,T=g.inputChangeHandler,E=k?"".concat(tt.a.control," ").concat(tt.a.invalid):"".concat(tt.a.control," "),S=at(o),H=S.value,w=S.hasError,R=S.isValid,A=S.inputChangeHandler,P=S.inputBlurHandler,F=w?"".concat(tt.a.control," ").concat(tt.a.invalid):"".concat(tt.a.control),L=s.items.length;Object(r.useEffect)((function(){c(!!(j&&v&&B&&R&&L>0))}),[j,v,B,R,L]);var V=a?"".concat(tt.a.submit):"".concat(tt.a.submit," ").concat(tt.a.invalidBtn);return Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.onConfirm({name:d,street:x,postalCode:I,city:H})},className:tt.a.form,children:[Object(u.jsxs)("div",{className:tt.a.inputs,children:[Object(u.jsx)(q,{className:O,input:{type:"text",id:"name",onChange:h,onBlur:p},value:d,label:"Name"}),Object(u.jsx)(q,{className:N,input:{type:"text",id:"street",onChange:y,onBlur:C},value:x,label:"Street"}),Object(u.jsx)(q,{className:E,input:{type:"text",id:"postal",onChange:T,onBlur:M},value:I,label:"Postal Code"}),Object(u.jsx)(q,{className:F,input:{type:"text",id:"city",onChange:A,onBlur:P},value:H,label:"City"})]}),Object(u.jsxs)("div",{className:tt.a.actions,children:[Object(u.jsx)("button",{type:"button",onClick:t.onCancel,children:"Cancel"}),Object(u.jsx)("button",{type:"submit",className:V,disabled:!a,children:"Confirm"})]})]})},it=function(t){var e=Object(r.useState)(!1),n=Object(i.a)(e,2),a=n[0],c=n[1],o=Object(r.useState)(!1),l=Object(i.a)(o,2),d=l[0],m=l[1],j=Object(r.useState)(!1),p=Object(i.a)(j,2),h=p[0],O=p[1],f=Object(r.useContext)(b),v=f.items,C="$".concat(f.totalAmount.toFixed(2)),y=v.length>0,N=function(t){t.quantity<25?f.addItem(Object(I.a)(Object(I.a)({},t),{},{quantity:1})):alert("Can't add more than 25 items of same meal")},g=function(t){f.removeItem(t)},k=function(){var t=Object(_.a)(x.a.mark((function t(e){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),t.next=3,fetch("https://react-http-3176c-default-rtdb.firebaseio.com/orders.json",{method:"POST",body:JSON.stringify({user:e,orderedItems:f.items})});case 3:m(!1),O(!0),f.clearCart();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=Object(u.jsx)("ul",{className:D.a["cart-items"],children:v.map((function(t){return Object(u.jsx)(Y,{id:t.id,name:t.name,price:t.price,quantity:t.quantity,onAdd:N.bind(null,t),onRemove:g.bind(null,t.id)},t.id)}))}),q=!a&&Object(u.jsxs)("div",{className:D.a.actions,children:[Object(u.jsx)("button",{className:D.a["button--alt"],onClick:t.onClose,children:"Close"}),y&&Object(u.jsx)("button",{className:D.a.button,onClick:function(){c(!0)},children:"Order"})]}),M=Object(u.jsx)("p",{children:"Sending order data..."}),T=Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsx)("p",{children:"Successfully sent the oder."}),Object(u.jsx)("div",{className:D.a.actions,children:Object(u.jsx)("button",{className:D.a.button,onClick:t.onClose,children:"Close"})})]}),E=Object(u.jsxs)(s.a.Fragment,{children:[B,Object(u.jsxs)("div",{className:D.a.total,children:[Object(u.jsx)("span",{children:"Total Amount"}),Object(u.jsx)("span",{children:C})]}),a&&y&&Object(u.jsx)(ct,{onConfirm:k,onCancel:t.onClose}),q]});return Object(u.jsxs)(W,{onClose:t.onClose,children:[!d&&!h&&E,d&&!h&&M,!d&&h&&T]})};n(42);var rt=function(){var t=Object(r.useState)(!1),e=Object(i.a)(t,2),n=e[0],a=e[1];return Object(u.jsxs)(V,{children:[n&&Object(u.jsx)(it,{onClose:function(){a(!1)}}),Object(u.jsx)(O,{cartOnClick:function(){a(!0)}}),Object(u.jsx)("main",{children:Object(u.jsx)(A,{})})]})};c.a.render(Object(u.jsx)(rt,{}),document.getElementById("root"))},7:function(t,e,n){t.exports={form:"Checkout_form__26T_w",inputs:"Checkout_inputs__1D5GJ",control:"Checkout_control__dQM6C",actions:"Checkout_actions__1Bv72",submit:"Checkout_submit__1szXQ",invalid:"Checkout_invalid__t3SS8",invalidInput:"Checkout_invalidInput__21kFS",invalidBtn:"Checkout_invalidBtn__3n21K"}}},[[43,1,2]]]);
//# sourceMappingURL=main.34e4e75b.chunk.js.map