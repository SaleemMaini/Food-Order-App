(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{11:function(e,t,n){e.exports={"cart-items":"Cart_cart-items__3K3IZ",total:"Cart_total__2CnBl",actions:"Cart_actions__2uvzP","button--alt":"Cart_button--alt__2oGQz",button:"Cart_button__1bCiN"}},14:function(e,t,n){e.exports={"cart-item":"CartItem_cart-item__2UegP",summary:"CartItem_summary__Ocyzb",price:"CartItem_price__1DiMZ",amount:"CartItem_amount__lS5WJ",actions:"CartItem_actions__h-B5S"}},20:function(e,t,n){e.exports={button:"HeaderCartButton_button__2PYfn",icon:"HeaderCartButton_icon__3Wpam",badge:"HeaderCartButton_badge__1jtXQ",bump:"HeaderCartButton_bump__1Hc6B"}},24:function(e,t,n){e.exports={mealsList:"AvailableMeals_mealsList__1qTa8","meals-appear":"AvailableMeals_meals-appear__1DnQs",errorHandle:"AvailableMeals_errorHandle__27gw2"}},25:function(e,t,n){e.exports={backdrop:"Modal_backdrop__1C-zG",modal:"Modal_modal__1v4hb","slide-down":"Modal_slide-down__1nl5d"}},30:function(e,t,n){e.exports={meal:"MealItem_meal__3tpdw",description:"MealItem_description__3s4VQ",mealPhoto:"MealItem_mealPhoto__TsIh_",price:"MealItem_price__2SWWK",mealCard:"MealItem_mealCard__GTqef"}},32:function(e,t,n){e.exports={input:"Input_input__32dYR"}},33:function(e,t,n){e.exports={form:"MealItemForm_form__a7gDZ"}},37:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(10),c=n.n(a),r=(n(37),n(6)),s=n(0),i=n.n(s),o=n(15),l=n(26),u=n(22),d=n(1),j=function(){return Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(d.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},m=n(20),b=n.n(m),O=i.a.createContext({items:[],totalAmount:0,addItem:function(e){},removeItem:function(e){},clearCart:function(){}}),p=function(e){var t=Object(s.useState)(!1),n=Object(r.a)(t,2),a=n[0],c=n[1],i=Object(s.useContext)(O).items,o=i.reduce((function(e,t){return e+t.amount}),0),l="".concat(b.a.button," ").concat(a?b.a.bump:"");return Object(s.useEffect)((function(){if(0!==i.length){c(!0);var e=setTimeout((function(){return c(!1)}),300);return function(){clearTimeout(e)}}}),[i]),Object(d.jsxs)("button",{className:l,onClick:e.onClick,children:[Object(d.jsx)("span",{className:b.a.icon,children:Object(d.jsx)(j,{})}),Object(d.jsx)("span",{className:b.a.badge,children:o})]})},h=n.p+"static/media/logo.afc79b0a.png",x=function(e){return Object(d.jsx)(l.a,{sticky:"top",bg:"dark",variant:"dark",children:Object(d.jsxs)(u.a,{children:[Object(d.jsxs)(l.a.Brand,{href:"#home",children:[Object(d.jsx)("img",{src:h,alt:"",width:"30",height:"30",className:"mx-3"}),Object(d.jsx)("span",{style:{fontWeight:600},children:"Food order app"})]}),Object(d.jsx)(l.a.Brand,{children:Object(d.jsx)(p,{onClick:e.cartOnClick})})]})})},f=function(e){return Object(d.jsx)(o.Fragment,{children:Object(d.jsx)(x,{cartOnClick:e.onOpenCart})})},_=n(13),v=n.n(_),C=n(23),N=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(null),i=Object(r.a)(c,2),o=i[0],l=i[1],u=Object(s.useCallback)(function(){var e=Object(C.a)(v.a.mark((function e(t,n){var c,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),l(null),e.prev=2,e.next=5,fetch(t.url,{method:t.method?t.method:"GET",headers:t.headers?t.headers:{},body:t.body?JSON.stringify(t.body):null});case 5:if((c=e.sent).ok){e.next=8;break}throw new Error("Request Failed");case 8:return e.next=10,c.json();case 10:r=e.sent,n(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),l(e.t0.message||"Something wrong");case 17:a(!1);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[]);return{isLoading:n,error:o,sendRequest:u}},g=n(24),y=n.n(g),I=n(30),k=n.n(I),S=n(2),A=n(32),M=n.n(A),w=i.a.forwardRef((function(e,t){var n=Object(s.useRef)(),a=function(){return n.current.value};return Object(s.useImperativeHandle)(t,(function(){return{value:a}})),Object(d.jsxs)("div",{className:e.className||M.a.input,children:[Object(d.jsx)("label",{htmlFor:e.input.id,children:e.label}),Object(d.jsx)("input",Object(S.a)({ref:n},e.input))]})})),P=n(33),T=n.n(P),R=function(e){var t=Object(s.useState)(!0),n=Object(r.a)(t,2),a=n[0],c=n[1],i=Object(s.useRef)();return Object(d.jsxs)("form",{className:"".concat(T.a.form," mx-auto"),onSubmit:function(t){t.preventDefault();var n=i.current.value,a=+n;0===n.trim().length||a<1||a>5?c(!1):e.onAddToCart(a)},children:[Object(d.jsx)(w,{input:{ref:i,id:"amount_"+e.id,type:"number",max:5,min:1,step:1,defaultValue:1},label:"Amount"}),Object(d.jsx)("button",{children:"+Add"}),!a&&Object(d.jsx)("p",{children:"amount is not valid"})]})},E=n(12),F=n(29),H=function(e){var t=Object(s.useContext)(O),n="$".concat(e.price.toFixed(2));return Object(d.jsx)(s.Fragment,{children:Object(d.jsx)(F.a,{children:Object(d.jsx)(E.a,{className:"".concat(k.a.mealCard," text-center"),children:Object(d.jsxs)(E.a.Body,{children:[Object(d.jsx)("div",{className:"".concat(k.a.mealPhoto," mx-auto d-flex align-items-center"),children:Object(d.jsx)(E.a.Img,{className:"",variant:"top",src:"".concat(e.src),alt:"Image Photo"})}),Object(d.jsx)(E.a.Title,{children:e.name}),Object(d.jsx)(E.a.Text,{children:e.description}),Object(d.jsx)(E.a.Text,{children:n}),Object(d.jsx)(E.a.Footer,{children:Object(d.jsx)(R,{id:e.id,onAddToCart:function(n){t.addItem({id:e.id,name:e.name,amount:n,price:e.price})}})})," "]})})})})},B=n(31),D=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],c=N(),i=c.isLoading,o=c.error,l=c.sendRequest;Object(s.useEffect)((function(){l({url:"https://react-http-3176c-default-rtdb.firebaseio.com/meals.json"},(function(e){var t=[];for(var n in e)t.push({id:n,name:e[n].name,description:e[n].description,price:e[n].price,photo:e[n].photo});a(t)}))}),[l]);var j=n.map((function(e){return Object(d.jsx)(H,{id:e.id,name:e.name,description:e.description,price:e.price,src:e.photo},e.id)}));return Object(d.jsxs)("section",{className:y.a.mealsList,children:[Object(d.jsx)("header",{children:"Meals List"}),i&&Object(d.jsx)("p",{className:y.a.errorHandle,children:"Loading..."}),o&&Object(d.jsxs)("p",{className:y.a.errorHandle,children:[o," (Please turn on the VPN if firebase doesn't work in your country)."]}),Object(d.jsxs)(u.a,{children:[Object(d.jsx)(B.a,{children:j.slice(0,3)}),Object(d.jsx)(B.a,{children:j.slice(3)})]})]})},z=function(){return Object(d.jsx)(o.Fragment,{children:Object(d.jsx)(D,{})})},L=n(19),Q={items:[],totalAmount:0},q=function(e,t){if("ADD_ITEM"===t.type){var n,a=e.totalAmount+t.item.price*t.item.amount,c=e.items.findIndex((function(e){return e.id===t.item.id})),r=e.items[c];if(r){var s=Object(S.a)(Object(S.a)({},r),{},{amount:r.amount+t.item.amount});(n=Object(L.a)(e.items))[c]=s}else n=e.items.concat(t.item);return{items:n,totalAmount:a}}if("REMOVE_ITEM"===t.type){var i,o=e.items.findIndex((function(e){return e.id===t.id})),l=e.items[o],u=e.totalAmount-l.price;if(1===l.amount)i=e.items.filter((function(e){return e.id!==t.id}));else{var d=Object(S.a)(Object(S.a)({},l),{},{amount:l.amount-1});(i=Object(L.a)(e.items))[o]=d}return{items:i,totalAmount:u}}return t.type,Q},J=function(e){var t=Object(s.useReducer)(q,Q),n=Object(r.a)(t,2),a=n[0],c=n[1],i={items:a.items,totalAmount:a.totalAmount,addItem:function(e){c({type:"ADD_ITEM",item:e})},removeItem:function(e){c({type:"REMOVE_ITEM",id:e})},clearCart:function(){c({type:"CLEAR"})}};return Object(d.jsx)(O.Provider,{value:i,children:e.children})},V=n(11),W=n.n(V),G=n(25),X=n.n(G),Z=function(e){return Object(d.jsx)("div",{className:X.a.backdrop,onClick:e.onClick})},$=function(e){return Object(d.jsx)("div",{className:X.a.modal,children:Object(d.jsx)("div",{className:X.a.content,children:e.children})})},K=document.getElementById("modal"),Y=function(e){return Object(d.jsxs)(s.Fragment,{children:[c.a.createPortal(Object(d.jsx)(Z,{onClick:e.onClose}),K),c.a.createPortal(Object(d.jsx)($,{children:e.children}),K)]})},U=n(14),ee=n.n(U),te=function(e){return Object(d.jsxs)("li",{className:ee.a["cart-item"],children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:e.name}),Object(d.jsxs)("div",{className:ee.a.summary,children:[Object(d.jsx)("span",{className:ee.a.price,children:"$".concat(e.price)}),Object(d.jsx)("span",{className:ee.a.amount,children:"X ".concat(e.amount)})]})]}),Object(d.jsxs)("div",{className:ee.a.actions,children:[Object(d.jsx)("button",{onClick:e.onRemove,children:"-"}),Object(d.jsx)("button",{onClick:e.onAdd,children:"+"})]})]})},ne=n(7),ae=n.n(ne),ce=function(e){var t=Object(s.useState)({name:!0,street:!0,postalCode:!0,city:!0}),n=Object(r.a)(t,2),a=n[0],c=n[1],i=Object(s.useRef)(),o=Object(s.useRef)(),l=Object(s.useRef)(),u=Object(s.useRef)(),j=function(e){return""===e.trim()},m=a.name?"".concat(ae.a.control):"".concat(ae.a.control," ").concat(ae.a.invalid),b=a.street?"".concat(ae.a.control):"".concat(ae.a.control," ").concat(ae.a.invalid),O=a.postalCode?"".concat(ae.a.control):"".concat(ae.a.control," ").concat(ae.a.invalid),p=a.city?"".concat(ae.a.control):"".concat(ae.a.control," ").concat(ae.a.invalid);return Object(d.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=i.current.value(),a=o.current.value(),r=l.current.value(),s=u.current.value(),d=!j(n),m=!j(a),b=5===r.trim().length,O=!j(s);c({name:d,street:m,postalCode:b,city:O}),d&&m&&b&&O&&e.onConfirm({name:n,street:a,city:s,postalCode:r})},className:ae.a.form,children:[Object(d.jsx)(w,{className:m,input:{type:"text",id:"name"},ref:i,label:"Name"}),!a.name&&Object(d.jsx)("p",{className:ae.a.invalidInput,children:"Please enter a valid name."}),Object(d.jsx)(w,{className:b,input:{type:"text",id:"street"},ref:o,label:"Street"}),!a.street&&Object(d.jsx)("p",{className:ae.a.invalidInput,children:"Please enter a valid street."}),Object(d.jsx)(w,{className:O,input:{type:"text",id:"postal"},ref:l,label:"Postal Code"}),!a.postalCode&&Object(d.jsx)("p",{className:ae.a.invalidInput,children:"Please enter a valid postal code (5) numbers."}),Object(d.jsx)(w,{className:p,input:{type:"text",id:"city"},ref:u,label:"City"}),!a.city&&Object(d.jsx)("p",{className:ae.a.invalidInput,children:"Please enter a valid City."}),Object(d.jsxs)("div",{className:ae.a.actions,children:[Object(d.jsx)("button",{type:"button",onClick:e.onCancel,children:"Cancel"}),Object(d.jsx)("button",{type:"submit",className:ae.a.submit,children:"Confirm"})]})]})},re=function(e){var t=Object(s.useState)(!1),n=Object(r.a)(t,2),a=n[0],c=n[1],o=Object(s.useState)(!1),l=Object(r.a)(o,2),u=l[0],j=l[1],m=Object(s.useState)(!1),b=Object(r.a)(m,2),p=b[0],h=b[1],x=Object(s.useContext)(O),f=x.items,_="$".concat(x.totalAmount.toFixed(2)),N=f.length>0,g=function(e){x.addItem(Object(S.a)(Object(S.a)({},e),{},{amount:1}))},y=function(e){x.removeItem(e)},I=function(){var e=Object(C.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,fetch("https://react-http-3176c-default-rtdb.firebaseio.com/orders.json",{method:"POST",body:JSON.stringify({user:t,orderedItems:x.items})});case 3:j(!1),h(!0),x.clearCart();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(d.jsx)("ul",{className:W.a["cart-items"],children:f.map((function(e){return Object(d.jsx)(te,{id:e.id,name:e.name,price:e.price,amount:e.amount,onAdd:g.bind(null,e),onRemove:y.bind(null,e.id)},e.id)}))}),A=!a&&Object(d.jsxs)("div",{className:W.a.actions,children:[Object(d.jsx)("button",{className:W.a["button--alt"],onClick:e.onClose,children:"Close"}),N&&Object(d.jsx)("button",{className:W.a.button,onClick:function(){c(!0)},children:"Order"})]}),M=Object(d.jsx)("p",{children:"Sending order data..."}),w=Object(d.jsxs)(i.a.Fragment,{children:[Object(d.jsx)("p",{children:"Successfully sent the oder."}),Object(d.jsx)("div",{className:W.a.actions,children:Object(d.jsx)("button",{className:W.a.button,onClick:e.onClose,children:"Close"})})]}),P=Object(d.jsxs)(i.a.Fragment,{children:[k,Object(d.jsxs)("div",{className:W.a.total,children:[Object(d.jsx)("span",{children:"Total Amount"}),Object(d.jsx)("span",{children:_})]}),a&&Object(d.jsx)(ce,{onConfirm:I,onCancel:e.onClose}),A]});return Object(d.jsxs)(Y,{onClose:e.onClose,children:[!u&&!p&&P,u&&!p&&M,!u&&p&&w]})};n(42);var se=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(d.jsx)(i.a.Fragment,{children:Object(d.jsxs)(J,{children:[n&&Object(d.jsx)(re,{onClose:function(){a(!1)}}),Object(d.jsx)(f,{onOpenCart:function(){a(!0)}}),Object(d.jsx)("main",{children:Object(d.jsx)(z,{})})]})})};c.a.render(Object(d.jsx)(se,{}),document.getElementById("root"))},7:function(e,t,n){e.exports={form:"Checkout_form__26T_w",control:"Checkout_control__dQM6C",actions:"Checkout_actions__1Bv72",submit:"Checkout_submit__1szXQ",invalid:"Checkout_invalid__t3SS8",invalidInput:"Checkout_invalidInput__21kFS"}}},[[43,1,2]]]);
//# sourceMappingURL=main.bde7a6e9.chunk.js.map